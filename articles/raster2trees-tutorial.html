<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generating a tree list from a CHM • cloud2trees</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generating a tree list from a CHM">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cloud2trees</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/cloud2trees-setup.html">Setup</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/cloud2trees-overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/cloud2raster-tutorial.html">Creating DTM and CHM rasters</a></li>
    <li><a class="dropdown-item" href="../articles/raster2trees-tutorial.html">Generating a tree list from a CHM</a></li>
    <li><a class="dropdown-item" href="../articles/cloud2trees-pipeline.html">cloud2trees Pipeline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/georgewoolsey/cloud2trees/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generating a tree list from a CHM</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/georgewoolsey/cloud2trees/blob/main/vignettes/articles/raster2trees-tutorial.Rmd" class="external-link"><code>vignettes/articles/raster2trees-tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>raster2trees-tutorial.Rmd</code></div>
    </div>

    
    
<p>Individual Tree Detection (ITD) from aerial point cloud data is
traditionally achieved using two main approaches: segmenting trees
directly from the point cloud by clustering points based on crown shape
and spacing (e.g. <a href="https://doi.org/10.14358/PERS.78.1.75" class="external-link">Li et
al. 2012</a>), or using a Canopy Height Model (CHM) to delineate crowns
after identifying tree tops (local maxima; e.g. <a href="https://doi.org/10.14358/PERS.70.5.589" class="external-link">Popescu and Wynne
2004</a>). It is important to note that the <code>cloud2trees</code>
package is built exclusively upon the CHM methodology for ITD. Users
wishing to explore direct point cloud segmentation methods should
consult the functionalities of the <code>lidR</code> package
(e.g. <code><a href="https://rdrr.io/pkg/lidR/man/its_li2012.html" class="external-link">lidR::li2012()</a></code>).</p>
<p>This section introduces the <code><a href="../reference/raster2trees.html">raster2trees()</a></code> function,
which takes an already-generated CHM as input and performs the ITD. This
all-in-one function operates in two key steps: first, it performs the
initial tree detection using the <code><a href="https://rdrr.io/pkg/lidR/man/locate_trees.html" class="external-link">lidR::locate_trees()</a></code>
function with the <code><a href="https://rdrr.io/pkg/lidR/man/itd_lmf.html" class="external-link">lidR::lmf()</a></code> (Local Maximum Filter)
algorithm. Second, the resulting tree-top points are used as “seeds” to
perform Marker-Controlled Watershed Segmentation via the
<code><a href="https://rdrr.io/pkg/ForestTools/man/mcws.html" class="external-link">ForestTools::mcws()</a></code> function. This segmentation method
inverts the CHM to treat crowns as basins, and the marker points prevent
over-segmentation when delineating crown boundaries at the conceptual
boundary where water would overflow. It is superior to non-controlled
watershed segmentation methods because the tree-top markers prevent
over-segmentation. Upon successful completion, the
<code><a href="../reference/raster2trees.html">raster2trees()</a></code> function returns a spatial data frame
containing the tree crown polygons with the detected tree top point X
and Y coordinates to create spatial points if desired. This resulting
tree list provides the inherent ITD outputs of tree location and height,
along with crown area, but does not return any other biophysical tree
estimates (e.g. DBH).</p>
<p>Before using the raster2trees function, we recommend using the
<code><a href="../reference/itd_tuning.html">itd_tuning()</a></code> function to identify the most logical tree
detection to use with the crown architecture for the trees at your site.
See the xxxx tutorial to learn more on how to do this.</p>
<p>Let’s load the libraries we’ll use</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://georgewoolsey.github.io/cloud2trees/">cloud2trees</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<p>We <a href="cloud2raster-tutorial.html">previously demonstrated</a>
how to use <code><a href="../reference/cloud2raster.html">cloud2raster()</a></code> to process raw point cloud data
to generate a CHM.</p>
<p>We’ll continue with the small point cloud dataset that ships with the
<code>lidR</code> package for processing. We also need to define where
outputs should be written in the <code>output_dir</code> argument. For
demonstration we’ll use a temporary directory but you’ll likely want to
point to a permanent directory, for example:
<em>C:/Data/MixedConifer</em>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the path to a single .las|.laz file </span></span>
<span><span class="co">#  -or- the directory to a folder with many .las|.laz files</span></span>
<span><span class="va">las_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"lidR"</span>, <span class="st">"extdata"</span>, <span class="st">"MixedConifer.laz"</span><span class="op">)</span></span>
<span><span class="co"># output directroy</span></span>
<span><span class="va">out_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="generating-a-tree-list-from-a-chm-defaults">Generating a tree list from a CHM: Defaults<a class="anchor" aria-label="anchor" href="#generating-a-tree-list-from-a-chm-defaults"></a>
</h2>
<p>First, we’ll run <code><a href="../reference/cloud2raster.html">cloud2raster()</a></code> with some custom
settings since we know how to setup the function to get what we want (<a href="cloud2raster-tutorial.html">review here</a>)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cloud2raster_ans</span> <span class="op">&lt;-</span> <span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/cloud2raster.html">cloud2raster</a></span><span class="op">(</span></span>
<span>  input_las_dir <span class="op">=</span> <span class="va">las_dir</span></span>
<span>  , output_dir <span class="op">=</span> <span class="va">out_dir</span></span>
<span>  , chm_res_m <span class="op">=</span> <span class="fl">0.44</span></span>
<span>  , min_height <span class="op">=</span> <span class="fl">0</span></span>
<span>  , max_height <span class="op">=</span> <span class="fl">66</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>let’s look at the CHM really quick using
<code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">terra::plot()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">cloud2raster_ans</span><span class="op">$</span><span class="va">chm_rast</span></span>
<span>  , col <span class="op">=</span> <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span><span class="op">(</span><span class="fl">55</span>, alpha <span class="op">=</span> <span class="fl">0.88</span><span class="op">)</span></span>
<span>  , colNA <span class="op">=</span> <span class="st">"gray88"</span></span>
<span>  , main <span class="op">=</span> <span class="st">"CHM (m)"</span></span>
<span>  , axes <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="" width="100%"></p>
<p>we can also get a summary of the CHM cell values</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cloud2raster_ans</span><span class="op">$</span><span class="va">chm_rast</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="st">"CHM.meters"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    CHM.meters   </span></span>
<span><span class="co">#&gt;  Min.   : 0.05  </span></span>
<span><span class="co">#&gt;  1st Qu.:11.50  </span></span>
<span><span class="co">#&gt;  Median :15.55  </span></span>
<span><span class="co">#&gt;  Mean   :15.00  </span></span>
<span><span class="co">#&gt;  3rd Qu.:19.22  </span></span>
<span><span class="co">#&gt;  Max.   :32.02  </span></span>
<span><span class="co">#&gt;  NA's   :5242</span></span></code></pre></div>
<p>Now, we’ll run the <code><a href="../reference/raster2trees.html">raster2trees()</a></code> function to segment
trees from the CHM that we just generated which is passed to the
<code>chm_rast</code> argument. This argument expects a
<em>SpatRaster</em> class object as loaded by the <code>terra</code>
package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster2trees_ans</span> <span class="op">&lt;-</span> <span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/raster2trees.html">raster2trees</a></span><span class="op">(</span></span>
<span>  chm_rast <span class="op">=</span> <span class="va">cloud2raster_ans</span><span class="op">$</span><span class="va">chm_rast</span></span>
<span>  , outfolder <span class="op">=</span> <span class="va">out_dir</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/raster2trees.html">raster2trees()</a></code> returns a spatial data frame with crowns
segmented and delineated via polygon geometries</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster2trees_ans</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 477</span></span>
<span><span class="co">#&gt; Columns: 6</span></span>
<span><span class="co">#&gt; $ treeID        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1_481278.4_3813010.7"<span style="color: #949494;">, </span>"2_481281.5_3813010.7"<span style="color: #949494;">, </span>"3_48129…</span></span>
<span><span class="co">#&gt; $ tree_height_m <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 24.430000<span style="color: #949494;">, </span>22.230000<span style="color: #949494;">, </span>15.850000<span style="color: #949494;">, </span>13.440000<span style="color: #949494;">, </span>22.070000<span style="color: #949494;">, </span>2…</span></span>
<span><span class="co">#&gt; $ tree_x        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 481278.4<span style="color: #949494;">, </span>481281.5<span style="color: #949494;">, </span>481294.7<span style="color: #949494;">, </span>481312.7<span style="color: #949494;">, </span>481325.0<span style="color: #949494;">, </span>481336…</span></span>
<span><span class="co">#&gt; $ tree_y        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3813011<span style="color: #949494;">, </span>3813011<span style="color: #949494;">, </span>3813011<span style="color: #949494;">, </span>3813011<span style="color: #949494;">, </span>3813011<span style="color: #949494;">, </span>3813011<span style="color: #949494;">, </span>38…</span></span>
<span><span class="co">#&gt; $ crown_area_m2 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 9.4864<span style="color: #949494;">, </span>12.1968<span style="color: #949494;">, </span>15.4880<span style="color: #949494;">, </span>4.4528<span style="color: #949494;">, </span>7.7440<span style="color: #949494;">, </span>25.5552<span style="color: #949494;">, </span>24.00…</span></span>
<span><span class="co">#&gt; $ geometry      <span style="color: #949494; font-style: italic;">&lt;GEOMETRY [m]&gt;</span> POLYGON ((481276.4 3813011,...<span style="color: #949494;">, </span>MULTIPOLYGON ((…</span></span></code></pre></div>
<p>The CHM-based tree detection process yielded 477 unique trees (data
rows) with 6 tree attributes (data columns). Let’s break down what these
attributes are:</p>
<ol style="list-style-type: decimal">
<li>
<code>treeID</code>: A unique identifier for each detected tree</li>
<li>
<code>tree_height_m</code>: This is the tree top height based on the
local maximum identified for each tree</li>
<li>
<code>tree_x</code>: The X coordinate of the tree top point</li>
<li>
<code>tree_y</code>: The Y coordinate of the tree top point</li>
<li>
<code>crown_area_m2</code>: The tree’s crown area in square
meters</li>
<li>
<code>geometry</code>: The vertices for the tree crown polygon</li>
</ol>
<p>Let’s take a look at the crown polygons colored by the tree
heights:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster2trees_ans</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">tree_height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_distiller</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Oranges"</span>, name <span class="op">=</span> <span class="st">"tree ht. (m)"</span>, direction <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" alt="" width="100%"></p>
<p>Visually, it seems like there are a lot of small trees (lighter
color) in the 2.0 m to 2.5 m height range while the dominant and
co-dominant trees are between 18.4 m and 32.0 m in height</p>
<p>it is also easy to look at the tree crown polygons overlaid on the
CHM. We’ll first demonstrate with <code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">terra::plot()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">cloud2raster_ans</span><span class="op">$</span><span class="va">chm_rast</span></span>
<span>  , col <span class="op">=</span> <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">heat.colors</a></span><span class="op">(</span><span class="fl">55</span>, alpha <span class="op">=</span> <span class="fl">0.88</span><span class="op">)</span></span>
<span>  , colNA <span class="op">=</span> <span class="st">"gray88"</span></span>
<span>  , main <span class="op">=</span> <span class="st">"CHM (m) + segmented crown polygons (purple)"</span></span>
<span>  , axes <span class="op">=</span> <span class="cn">F</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">raster2trees_ans</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  , add <span class="op">=</span> <span class="cn">T</span></span>
<span>  , border <span class="op">=</span> <span class="st">"slateblue3"</span></span>
<span>  , col <span class="op">=</span> <span class="cn">NA</span>, lwd <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-10-1.png" class="r-plt" alt="" width="100%"></p>
<p>Let’s look at a histogram of the tree heights to get a better feel
for what is going on</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster2trees_ans</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tree_height_m</span><span class="op">)</span></span>
<span>    , color <span class="op">=</span> <span class="st">"slateblue3"</span></span>
<span>    , fill <span class="op">=</span> <span class="st">"slateblue3"</span></span>
<span>    , binwidth <span class="op">=</span> <span class="fl">2</span></span>
<span>    , alpha <span class="op">=</span> <span class="fl">0.8</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.1</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"tree ht. (m)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-11-1.png" class="r-plt" alt="" width="100%"></p>
<p>we can also inspect the detected trees by comparing the tree height
against crown area with the expectation that shorter trees have smaller
crowns while taller trees have larger crowns</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster2trees_ans</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tree_height_m</span>, y <span class="op">=</span> <span class="va">crown_area_m2</span><span class="op">)</span></span>
<span>    , color <span class="op">=</span> <span class="st">"grey"</span></span>
<span>    , alpha <span class="op">=</span> <span class="fl">0.7</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tree_height_m</span>, y <span class="op">=</span> <span class="va">crown_area_m2</span><span class="op">)</span></span>
<span>    , color <span class="op">=</span> <span class="st">"grey22"</span></span>
<span>    , se <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"tree ht. (m)"</span></span>
<span>    , y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"crown area (m"</span><span class="op">^</span><span class="fl">2</span>,<span class="st">")"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-12-1.png" class="r-plt" alt="" width="100%"></p>
<p>Typically, we would not expect to see large crown areas associated
with short trees, so we may need to adjust the window search size to
adjust the search radius for shorter trees in this data set</p>
<p>If we look in the directory that we set the <code>outfolder</code>
argument to in the <code><a href="../reference/raster2trees.html">raster2trees()</a></code> call, we will see that
the function wrote two files:</p>
<ol style="list-style-type: decimal">
<li>
<em>final_detected_crowns.gpkg</em>: This is a Geopackage file
containing the individual tree crown polygons with the attributes we
looked at</li>
<li>
<em>final_detected_tree_tops.gpkg</em>: This is a Geopackage file
containing the individual tree top locations as points attributed with
each variable we looked at</li>
</ol>
<p>If you execute the <code><a href="../reference/raster2trees.html">raster2trees()</a></code> process multiple times
using the same <code>outfolder</code> location, then these two files
will be overwritten. As such, if you intend to perform multiple
iterations of the processing in the same <code>outfolder</code> location
and wish to retain the results, it is recommended you rename the
<em>final_detected_*.gpkg</em> files before running the next
iteration.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">out_dir</span>, pattern <span class="op">=</span> <span class="st">"*.gpkg$"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "final_detected_crowns.gpkg"    "final_detected_tree_tops.gpkg"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-a-tree-list-from-a-chm-custom">Generating a tree list from a CHM: Custom<a class="anchor" aria-label="anchor" href="#generating-a-tree-list-from-a-chm-custom"></a>
</h2>
<p>By default, the <code><a href="../reference/raster2trees.html">raster2trees()</a></code> function implements the
logarithmic variable window function that is built into cloud2trees for
tree detection. Should you want to select a different function to apply,
we can see a list of them</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/itd_ws_functions.html">itd_ws_functions</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "lin_fn" "exp_fn" "log_fn"</span></span></code></pre></div>
<p>we can quickly plot what shapes these take over a range of
<code>x</code> values which represent CHM cell heights in the ITD
algorithm</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_function.html" class="external-link">geom_function</a></span><span class="op">(</span></span>
<span>    fun <span class="op">=</span> <span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/itd_ws_functions.html">itd_ws_functions</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">lin_fn</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"lin_fn"</span><span class="op">)</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.7</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_function.html" class="external-link">geom_function</a></span><span class="op">(</span></span>
<span>    fun <span class="op">=</span> <span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/itd_ws_functions.html">itd_ws_functions</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">exp_fn</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"exp_fn"</span><span class="op">)</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.7</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_function.html" class="external-link">geom_function</a></span><span class="op">(</span></span>
<span>    fun <span class="op">=</span> <span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/itd_ws_functions.html">itd_ws_functions</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">log_fn</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"log_fn"</span><span class="op">)</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.7</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Dark2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">60</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"CHM height"</span>, y <span class="op">=</span> <span class="st">"window size"</span>, color <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-15-1.png" class="r-plt" alt="" width="100%"></p>
<p>This shows us that there is a <code>lin_fn</code> (linear),
<code>exp_fn</code> (exponential), and <code>log_fn</code> (logarithmic)
function that relate CHM-based tree top height to crown size for
detecting individual trees.</p>
<p>If we want to use the <code>exp_fn</code> we can execute
<code><a href="../reference/raster2trees.html">raster2trees()</a></code> and directly specify the <code>exp_fn</code>
using the <code>itd_ws_functions</code> function list</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster2trees_ans_exp</span> <span class="op">&lt;-</span> <span class="fu">cloud2trees</span><span class="fu">::</span><span class="fu"><a href="../reference/raster2trees.html">raster2trees</a></span><span class="op">(</span></span>
<span>  chm_rast <span class="op">=</span> <span class="va">cloud2raster_ans</span><span class="op">$</span><span class="va">chm_rast</span></span>
<span>  , outfolder <span class="op">=</span> <span class="va">out_dir</span></span>
<span>  , ws <span class="op">=</span> <span class="fu"><a href="../reference/itd_ws_functions.html">itd_ws_functions</a></span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="st">"exp_fn"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Let’s spatially compare the detected crowns</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a custom color palette to mimic </span></span>
<span>  <span class="co"># ...the RColorBrewer palette without needing to load that package</span></span>
<span><span class="va">cust_cols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"seagreen3"</span>, <span class="st">"slateblue3"</span><span class="op">)</span></span>
<span><span class="co"># plot </span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">raster2trees_ans</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"ITD with log_fn (default)"</span><span class="op">)</span></span>
<span>    , fill <span class="op">=</span> <span class="cn">NA</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.1</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">raster2trees_ans_exp</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"ITD with exp_fn"</span><span class="op">)</span></span>
<span>    , fill <span class="op">=</span> <span class="cn">NA</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">0.6</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">cust_cols</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span></span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-17-1.png" class="r-plt" alt="" width="100%"></p>
<p>A few areas of difference are apparent. Using the <code>exp_fn</code>
for the window search function resulted in 422 detected trees whereas
the default, <code>log_fn</code> yielded 477 trees (change of
-11.5%)</p>
<p>to really see what is going on, let’s look at the height distribution
of the detected trees</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">raster2trees_ans</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">tree_height_m</span></span>
<span>      , fill <span class="op">=</span> <span class="st">"ITD with log_fn (default)"</span></span>
<span>      , color <span class="op">=</span> <span class="st">"ITD with log_fn (default)"</span></span>
<span>    <span class="op">)</span></span>
<span>    , alpha <span class="op">=</span> <span class="fl">0.8</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.2</span></span>
<span>    , binwidth <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">raster2trees_ans_exp</span></span>
<span>    , mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">tree_height_m</span></span>
<span>      , fill <span class="op">=</span> <span class="st">"ITD with exp_fn"</span></span>
<span>      , color <span class="op">=</span> <span class="st">"ITD with exp_fn"</span></span>
<span>    <span class="op">)</span></span>
<span>    , alpha <span class="op">=</span> <span class="fl">0.8</span></span>
<span>    , lwd <span class="op">=</span> <span class="fl">1.2</span></span>
<span>    , binwidth <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">cust_cols</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">cust_cols</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"tree ht. (m)"</span>, fill <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="raster2trees-tutorial_files/figure-html/unnamed-chunk-18-1.png" class="r-plt" alt="" width="100%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by George Woolsey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
