<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>re-writes leafR steps to allow for treeID as input for ladderfuelsR or ladderfuelsr_cbh() — leafr_for_ladderfuelsr • cloud2trees</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="re-writes leafR steps to allow for treeID as input for ladderfuelsR or ladderfuelsr_cbh() — leafr_for_ladderfuelsr"><meta name="description" content="leafr_for_ladderfuelsr() is a re-write of leafR::lad.voxels() and leafR::lad.profile() to:
removes the requirement to use a file written to disk
allows for the calculation of LAD by the treeID attribute so that don't have to pass individual tree point clouds
updates to the use of the latest lidR functionality and removes the use of sp and raster functions
updates the function to tidy data manipulation

"><meta property="og:description" content="leafr_for_ladderfuelsr() is a re-write of leafR::lad.voxels() and leafR::lad.profile() to:
removes the requirement to use a file written to disk
allows for the calculation of LAD by the treeID attribute so that don't have to pass individual tree point clouds
updates to the use of the latest lidR functionality and removes the use of sp and raster functions
updates the function to tidy data manipulation

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cloud2trees</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cloud2trees-setup.html">Setup</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cloud2trees-overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/cloud2raster-tutorial.html">Creating DTM and CHM rasters</a></li>
    <li><a class="dropdown-item" href="../articles/raster2trees-tutorial.html">Generating a tree list from a CHM</a></li>
    <li><a class="dropdown-item" href="../articles/cloud2trees-pipeline.html">cloud2trees Pipeline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/georgewoolsey/cloud2trees/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>re-writes <code>leafR</code> steps to allow for treeID as input for <code>ladderfuelsR</code> or <code><a href="ladderfuelsr_cbh.html">ladderfuelsr_cbh()</a></code></h1>
      <small class="dont-index">Source: <a href="https://github.com/georgewoolsey/cloud2trees/blob/main/R/leafr_for_ladderfuelsr.R" class="external-link"><code>R/leafr_for_ladderfuelsr.R</code></a></small>
      <div class="d-none name"><code>leafr_for_ladderfuelsr.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>leafr_for_ladderfuelsr()</code> is a re-write of <code><a href="https://rdrr.io/pkg/leafR/man/lad.voxels.html" class="external-link">leafR::lad.voxels()</a></code> and <code><a href="https://rdrr.io/pkg/leafR/man/lad.profile.html" class="external-link">leafR::lad.profile()</a></code> to:</p><ul><li><p>removes the requirement to use a file written to disk</p></li>
<li><p>allows for the calculation of LAD by the <code>treeID</code> attribute so that don't have to pass individual tree point clouds</p></li>
<li><p>updates to the use of the latest <code>lidR</code> functionality and removes the use of <code>sp</code> and <code>raster</code> functions</p></li>
<li><p>updates the function to <code>tidy</code> data manipulation</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">leafr_for_ladderfuelsr</span><span class="op">(</span></span>
<span>  <span class="va">las</span>,</span>
<span>  voxel_grain_size_m <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  k <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  attribute <span class="op">=</span> <span class="st">"treeID"</span>,</span>
<span>  min_pulses <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  relative <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-las">las<a class="anchor" aria-label="anchor" href="#arg-las"></a></dt>
<dd><p>an object of class LAS that has been height normalized.</p></dd>


<dt id="arg-voxel-grain-size-m">voxel_grain_size_m<a class="anchor" aria-label="anchor" href="#arg-voxel-grain-size-m"></a></dt>
<dd><p>numeric. horizontal resolution (suggested 1 meter for lad profiles and 10 meters for LAI maps). See <code>grain.size</code> in <code><a href="https://rdrr.io/pkg/leafR/man/lad.voxels.html" class="external-link">leafR::lad.voxels()</a></code></p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>numeric. coefficient to transform effective LAI to real LAI (k = 1; for effective LAI)</p></dd>


<dt id="arg-attribute">attribute<a class="anchor" aria-label="anchor" href="#arg-attribute"></a></dt>
<dd><p>character. The column name of the attribute to group the return LAD profile by. Default is "treeID". The attribute (whatever it is defined as)
must exist in the <code>las</code> data</p></dd>


<dt id="arg-min-pulses">min_pulses<a class="anchor" aria-label="anchor" href="#arg-min-pulses"></a></dt>
<dd><p>numeric. minimum number of pulses required to return a record by attribute. set to zero (default) to leave data unfiltered.</p></dd>


<dt id="arg-relative">relative<a class="anchor" aria-label="anchor" href="#arg-relative"></a></dt>
<dd><p>logical. produce lad profile by relative total LAI values. Indicate when using effective LAI value.
if set to TRUE, lad value will be relative_lad; otherwise, lad value will be mean_lad</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an data.frame which can have multiple treeIDs to use as input for <code><a href="ladderfuelsr_cbh.html">ladderfuelsr_cbh()</a></code></p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p><a href="https://doi.org/10.3390/rs11010092" class="external-link">https://doi.org/10.3390/rs11010092</a>
Almeida, D. R. A. D., Stark, S. C., Shao, G., Schietti, J., Nelson, B. W., Silva, C. A., ... &amp; Brancalion, P. H. S. (2019). Optimizing the remote detection of tropical rainforest structure with airborne lidar: Leaf area profile sensitivity to pulse density and spatial sampling. Remote Sensing, 11(1), 92.
<a href="https://github.com/DRAAlmeida/leafR" class="external-link">https://github.com/DRAAlmeida/leafR</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span> <span class="co"># polygon data</span></span></span>
<span class="r-in"><span> <span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"cloud2trees"</span>,<span class="st">"extdata"</span>,<span class="st">"crowns_poly.gpkg"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">trees_poly</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># simplify polygons</span></span></span>
<span class="r-in"><span> <span class="va">trees_poly</span> <span class="op">&lt;-</span> <span class="fu"><a href="simplify_multipolygon_crowns.html">simplify_multipolygon_crowns</a></span><span class="op">(</span><span class="va">trees_poly</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># point cloud data</span></span></span>
<span class="r-in"><span> <span class="va">lf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"cloud2trees"</span>,<span class="st">"extdata"</span>,<span class="st">"norm_las"</span>,<span class="st">"RMNP_017_2018_normalize.las"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">las</span> <span class="op">&lt;-</span> <span class="fu">lidR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lidR/man/readLAS.html" class="external-link">readLAS</a></span><span class="op">(</span><span class="va">lf</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">las</span><span class="op">@</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># polygon_attribute_to_las to attach treeID to las</span></span></span>
<span class="r-in"><span> <span class="va">las</span> <span class="op">&lt;-</span> <span class="fu"><a href="polygon_attribute_to_las.html">polygon_attribute_to_las</a></span><span class="op">(</span><span class="va">las</span>, <span class="va">trees_poly</span>, force_crs <span class="op">=</span> <span class="cn">T</span>, attribute <span class="op">=</span> <span class="st">"treeID"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">las</span><span class="op">@</span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co"># get the lad profile for each treeID</span></span></span>
<span class="r-in"><span> <span class="va">lad_profile</span> <span class="op">&lt;-</span> <span class="fu">leafr_for_ladderfuelsr</span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="va">las</span></span></span>
<span class="r-in"><span>     , voxel_grain_size_m <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>     , k <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>     , group_treeID <span class="op">=</span> <span class="cn">T</span></span></span>
<span class="r-in"><span>     , relative <span class="op">=</span> <span class="cn">F</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">lad_profile</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by George Woolsey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

