<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate tree biomass (or crown biomass) for a tree list — trees_biomass • cloud2trees</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate tree biomass (or crown biomass) for a tree list — trees_biomass"><meta name="description" content="trees_biomass() streamlines the process for estimating individual tree biomass in kilograms, or the component biomass of the tree crown in kilograms.
Users can select one or all of the following methods available in the package for estimating biomass:
Tree crown biomass in kilograms:
&quot;landfire&quot; - based on LANDFIRE's Forest Canopy Bulk Density (CBD) data (trees_biomass_landfire())
&quot;cruz&quot; - based on Cruz et al. (2003) canopy fuel stratum equations (trees_biomass_cruz())

Tree total above ground biomass in kilograms:
coming soon



If multiple methods are selected (e.g. method = c(&quot;cruz&quot;,&quot;landfire&quot;)), then the program will compile the
biomass estimates and return one tree list."><meta property="og:description" content="trees_biomass() streamlines the process for estimating individual tree biomass in kilograms, or the component biomass of the tree crown in kilograms.
Users can select one or all of the following methods available in the package for estimating biomass:
Tree crown biomass in kilograms:
&quot;landfire&quot; - based on LANDFIRE's Forest Canopy Bulk Density (CBD) data (trees_biomass_landfire())
&quot;cruz&quot; - based on Cruz et al. (2003) canopy fuel stratum equations (trees_biomass_cruz())

Tree total above ground biomass in kilograms:
coming soon



If multiple methods are selected (e.g. method = c(&quot;cruz&quot;,&quot;landfire&quot;)), then the program will compile the
biomass estimates and return one tree list."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cloud2trees</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cloud2trees-setup.html">Setup</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cloud2trees-overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/cloud2raster-tutorial.html">Creating DTM and CHM rasters</a></li>
    <li><a class="dropdown-item" href="../articles/raster2trees-tutorial.html">Generating a tree list from a CHM</a></li>
    <li><a class="dropdown-item" href="../articles/cloud2trees-pipeline.html">cloud2trees Pipeline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/georgewoolsey/cloud2trees/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimate tree biomass (or crown biomass) for a tree list</h1>
      <small class="dont-index">Source: <a href="https://github.com/georgewoolsey/cloud2trees/blob/main/R/trees_biomass.R" class="external-link"><code>R/trees_biomass.R</code></a></small>
      <div class="d-none name"><code>trees_biomass.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>trees_biomass()</code> streamlines the process for estimating individual tree biomass in kilograms, or the component biomass of the tree crown in kilograms.
Users can select one or all of the following methods available in the package for estimating biomass:</p><ul><li><p>Tree crown biomass in kilograms:</p><ul><li><p>"landfire" - based on LANDFIRE's Forest Canopy Bulk Density (CBD) data (<code><a href="trees_biomass_landfire.html">trees_biomass_landfire()</a></code>)</p></li>
<li><p>"cruz" - based on Cruz et al. (2003) canopy fuel stratum equations (<code><a href="trees_biomass_cruz.html">trees_biomass_cruz()</a></code>)</p></li>
</ul></li>
<li><p>Tree total above ground biomass in kilograms:</p><ul><li><p>coming soon</p></li>
</ul></li>
</ul><p>If multiple methods are selected (e.g. <code>method = c("cruz","landfire")</code>), then the program will compile the
biomass estimates and return one tree list.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trees_biomass</span><span class="op">(</span></span>
<span>  <span class="va">tree_list</span>,</span>
<span>  crs <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  study_boundary <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  input_landfire_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  input_foresttype_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  max_crown_kg_per_m3 <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tree-list">tree_list<a class="anchor" aria-label="anchor" href="#arg-tree-list"></a></dt>
<dd><p>data.frame. A data frame with the columns <code>treeID</code>, <code>tree_x</code>, and <code>tree_y</code>.
If an <code>sf</code> class object with POINT geometry (see <code><a href="https://r-spatial.github.io/sf/reference/st_geometry_type.html" class="external-link">sf::st_geometry_type()</a></code>), the program will use the data "as-is" and only require the <code>treeID</code> column.
Other required columns include:</p><ul><li><p><code>crown_area_m2</code>, <code>tree_height_m</code> (e.g. as exported by <code><a href="raster2trees.html">raster2trees()</a></code>)</p></li>
<li><p><code>tree_cbh_m</code> (e.g. as exported by <code><a href="trees_cbh.html">trees_cbh()</a></code>)</p></li>
<li><p>and one of <code>dbh_cm</code>, <code>dbh_m</code>, or  <code>basal_area_m2</code> (e.g. as exported by <code><a href="trees_dbh.html">trees_dbh()</a></code>)</p></li>
</ul></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>string. A crs string as returned from <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">sf::st_crs()</a></code> or the EPSG code of the x,y coordinates.
Defaults to the crs of the <code>tree_list</code> data if of class "sf".</p></dd>


<dt id="arg-study-boundary">study_boundary<a class="anchor" aria-label="anchor" href="#arg-study-boundary"></a></dt>
<dd><p>sf. The boundary of the study area to define the area of interest which may extend beyond the space with trees.
If no boundary given, the AOI will be built from location of trees in the tree list.</p></dd>


<dt id="arg-input-landfire-dir">input_landfire_dir<a class="anchor" aria-label="anchor" href="#arg-input-landfire-dir"></a></dt>
<dd><p>directory where LANDFIRE CBD data exists. Use <code><a href="get_landfire.html">get_landfire()</a></code> first.</p></dd>


<dt id="arg-input-foresttype-dir">input_foresttype_dir<a class="anchor" aria-label="anchor" href="#arg-input-foresttype-dir"></a></dt>
<dd><p>directory where Forest Type Groups data exists. Use <code><a href="get_foresttype.html">get_foresttype()</a></code> first.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character. one (e.g. <code>"landfire"</code>) or multiple (e.g. <code>c("cruz","landfire")</code>) of the following biomass estimation methods:</p><ul><li><p>Tree crown biomass in kilograms:</p><ul><li><p>"landfire" - based on LANDFIRE's Forest Canopy Bulk Density (CBD) data (<code><a href="trees_biomass_landfire.html">trees_biomass_landfire()</a></code>)</p></li>
<li><p>"cruz" - based on Cruz et al. (2003) canopy fuel stratum equations (<code><a href="trees_biomass_cruz.html">trees_biomass_cruz()</a></code>)</p></li>
</ul></li>
<li><p>Tree total above ground biomass in kilograms:</p><ul><li><p>coming soon</p></li>
</ul></li>
</ul></dd>


<dt id="arg-max-crown-kg-per-m-">max_crown_kg_per_m3<a class="anchor" aria-label="anchor" href="#arg-max-crown-kg-per-m-"></a></dt>
<dd><p>numeric. the maximum CBD of the tree crown in kilograms per cubic meter.
Values above this limit will be set at the median value for the area using only stands that have CBD values lower than this limit.
The default value of 2 kilograms per cubic meter was based on <a href="https://doi.org/10.1016/j.combustflame.2009.06.015" class="external-link">Mell et al. (2009)</a>
who found the dry bulk density of the tree crown was 2.6 kilograms per cubed meter
using Douglas-fir trees grown on Christmas tree farms.
Set this parameter to a large value (e.g. 1e10) or NULL to avoid limiting tree crown CBD.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list of objects: tree_list = spatial data frame of individual trees
; stand_cell_data_landfire = data frame of stands/cells in same projection as the LANDFIRE raster data
; stand_cell_data_cruz = data frame of stands/cells in same projection as the FIA forest type group raster data</p>
<p>See code in examples.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>See references in:</p><ul><li><p><code><a href="trees_biomass_landfire.html">trees_biomass_landfire()</a></code></p></li>
<li><p><code><a href="trees_biomass_cruz.html">trees_biomass_cruz()</a></code></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># use the tree list that ships with the package</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"cloud2trees"</span>, <span class="st">"extdata"</span>, <span class="st">"crowns_poly.gpkg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tl</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># call trees_biomass and get multiple biomass estimates</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span> <span class="op">&lt;-</span> <span class="fu">trees_biomass</span><span class="op">(</span>tree_list <span class="op">=</span> <span class="va">tl</span>, method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landfire"</span>,<span class="st">"cruz"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># what did we get back?</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># check out the tree list</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># check out the landfire stand data</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">stand_cell_data_landfire</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">trees</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># plot tree landfire crown biomass estimate</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      x <span class="op">=</span> <span class="va">tree_height_m</span></span></span>
<span class="r-in"><span>      , y <span class="op">=</span> <span class="va">landfire_crown_biomass_kg</span></span></span>
<span class="r-in"><span>      , color <span class="op">=</span> <span class="va">crown_area_m2</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># plot tree cruz crown biomass estimate</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      x <span class="op">=</span> <span class="va">tree_height_m</span></span></span>
<span class="r-in"><span>      , y <span class="op">=</span> <span class="va">cruz_crown_biomass_kg</span></span></span>
<span class="r-in"><span>      , color <span class="op">=</span> <span class="va">crown_area_m2</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># plot tree landfire vs. cruz crown biomass estimate</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      x <span class="op">=</span> <span class="va">landfire_crown_biomass_kg</span>, y <span class="op">=</span> <span class="va">cruz_crown_biomass_kg</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_abline</a></span><span class="op">(</span>lwd <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se<span class="op">=</span><span class="cn">F</span>, color <span class="op">=</span> <span class="st">"gray"</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">tree_height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span></span></span>
<span class="r-in"><span>      , <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span><span class="op">$</span><span class="va">cruz_crown_biomass_kg</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span></span></span>
<span class="r-in"><span>      , <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span><span class="op">$</span><span class="va">cruz_crown_biomass_kg</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># get the projection for the stand cell data</span></span></span>
<span class="r-in"><span><span class="va">epsg_code</span> <span class="op">&lt;-</span> <span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">stand_cell_data_landfire</span><span class="op">$</span><span class="va">rast_epsg_code</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># plot the stand cell data with trees overlaid</span></span></span>
<span class="r-in"><span><span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">stand_cell_data_landfire</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">trees</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>,y<span class="op">=</span><span class="va">y</span>,fill <span class="op">=</span> <span class="va">landfire_stand_kg_per_m3</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"gray44"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>,y<span class="op">=</span><span class="va">y</span>,label <span class="op">=</span> <span class="va">trees</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    data <span class="op">=</span> <span class="va">trees_biomass_ans</span><span class="op">$</span><span class="va">tree_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="va">epsg_code</span><span class="op">)</span></span></span>
<span class="r-in"><span>    , <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">cruz_crown_biomass_kg</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    fill<span class="op">=</span><span class="st">"stand kg/m3"</span>, color <span class="op">=</span> <span class="st">"landfire\ncrown kg"</span></span></span>
<span class="r-in"><span>    , caption <span class="op">=</span> <span class="st">"# trees shown in cell"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"rocket"</span>, na.value <span class="op">=</span> <span class="st">"gray"</span>, direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"viridis"</span>, na.value <span class="op">=</span> <span class="st">"gray22"</span>, begin <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by George Woolsey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

