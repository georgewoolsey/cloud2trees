<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate HMD using tree crown polygons and normalized point cloud data — trees_hmd_sf • cloud2trees</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate HMD using tree crown polygons and normalized point cloud data — trees_hmd_sf"><meta name="description" content="trees_hmd_sf() uses the input tree crown polygons (e.g. as exported by raster2trees()) with the columns
treeID and tree_height_m to extracting the height of the maximum crown diameter (HMD) using height normalized point cloud data (e.g. as exported by cloud2raster()).
HMD is extracted directly from the height normalized point cloud by finding the height of the non-ground point farthest from the tree center (i.e. tree top).
An early version of this process was developed by Andrew Sanchez Meador.
There are likely to be trees for which there is insufficient data in the point cloud to successfully estimate HMD. The user can elect to estimate missing HMD values which is accomplished via:
Attempt to extract HMD from all trees
Successfully extracted HMD trees become training data used to estimate the height-HMD allometry relationship that is spatially informed using the relative tree location compared to the training data
The height and location predicting HMD model built from the point cloud training data is used to predict HMD for the non-training (i.e. missing HMD) data

"><meta property="og:description" content="trees_hmd_sf() uses the input tree crown polygons (e.g. as exported by raster2trees()) with the columns
treeID and tree_height_m to extracting the height of the maximum crown diameter (HMD) using height normalized point cloud data (e.g. as exported by cloud2raster()).
HMD is extracted directly from the height normalized point cloud by finding the height of the non-ground point farthest from the tree center (i.e. tree top).
An early version of this process was developed by Andrew Sanchez Meador.
There are likely to be trees for which there is insufficient data in the point cloud to successfully estimate HMD. The user can elect to estimate missing HMD values which is accomplished via:
Attempt to extract HMD from all trees
Successfully extracted HMD trees become training data used to estimate the height-HMD allometry relationship that is spatially informed using the relative tree location compared to the training data
The height and location predicting HMD model built from the point cloud training data is used to predict HMD for the non-training (i.e. missing HMD) data

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cloud2trees</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cloud2trees-setup.html">Setup</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cloud2trees-overview.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/cloud2raster-tutorial.html">Creating DTM and CHM rasters</a></li>
    <li><a class="dropdown-item" href="../articles/raster2trees-tutorial.html">Generating a tree list from a CHM</a></li>
    <li><a class="dropdown-item" href="../articles/cloud2trees-pipeline.html">cloud2trees Pipeline</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/georgewoolsey/cloud2trees/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimate HMD using tree crown polygons and normalized point cloud data</h1>
      <small class="dont-index">Source: <a href="https://github.com/georgewoolsey/cloud2trees/blob/main/R/utils_hmd.R" class="external-link"><code>R/utils_hmd.R</code></a></small>
      <div class="d-none name"><code>trees_hmd_sf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>trees_hmd_sf()</code> uses the input tree crown polygons (e.g. as exported by <code><a href="raster2trees.html">raster2trees()</a></code>) with the columns
<code>treeID</code> and <code>tree_height_m</code> to extracting the height of the maximum crown diameter (HMD) using height normalized point cloud data (e.g. as exported by <code><a href="cloud2raster.html">cloud2raster()</a></code>).</p>
<p>HMD is extracted directly from the height normalized point cloud by finding the height of the non-ground point farthest from the tree center (i.e. tree top).</p>
<p>An early version of this process was developed by <a href="https://github.com/bi0m3trics" class="external-link">Andrew Sanchez Meador</a>.</p>
<p>There are likely to be trees for which there is insufficient data in the point cloud to successfully estimate HMD. The user can elect to estimate missing HMD values which is accomplished via:</p><ul><li><p>Attempt to extract HMD from all trees</p></li>
<li><p>Successfully extracted HMD trees become training data used to estimate the height-HMD allometry relationship that is spatially informed using the relative tree location compared to the training data</p></li>
<li><p>The height and location predicting HMD model built from the point cloud training data is used to predict HMD for the non-training (i.e. missing HMD) data</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">trees_hmd_sf</span><span class="op">(</span></span>
<span>  <span class="va">trees_poly</span>,</span>
<span>  norm_las <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tree_sample_n <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  tree_sample_prop <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  force_same_crs <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  trees_sample <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  ofile <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-trees-poly">trees_poly<a class="anchor" aria-label="anchor" href="#arg-trees-poly"></a></dt>
<dd><p>sf. A <code>sf</code> class object with POLYGON geometry (see <code><a href="https://r-spatial.github.io/sf/reference/st_geometry_type.html" class="external-link">sf::st_geometry_type()</a></code>), the program will use the data "as-is" and only require the <code>treeID</code> and <code>tree_height_m</code> columns.
Or the path to a single spatial polygon file.</p></dd>


<dt id="arg-norm-las">norm_las<a class="anchor" aria-label="anchor" href="#arg-norm-las"></a></dt>
<dd><p>character. a directory with nomalized las files, the path of a single .laz|.las file", -or- an object of class <code>LAScatalog</code>.
It is your responsibility to ensure that the point cloud is projected the same as the <code>trees_poly</code> data</p></dd>


<dt id="arg-tree-sample-n-tree-sample-prop">tree_sample_n, tree_sample_prop<a class="anchor" aria-label="anchor" href="#arg-tree-sample-n-tree-sample-prop"></a></dt>
<dd><p>numeric. Provide either <code>tree_sample_n</code>, the number of trees, or <code>tree_sample_prop</code>, the
proportion of the trees to attempt to extract a HMD from the point cloud for.
If neither are supplied, <code>tree_sample_n = 777</code> will be used. If both are supplied, <code>tree_sample_n</code> will be used.
Increasing <code>tree_sample_prop</code> toward one (1) will increase the processing time, perhaps significantly depending on the number of trees in the <code>trees_poly</code> data.</p></dd>


<dt id="arg-force-same-crs">force_same_crs<a class="anchor" aria-label="anchor" href="#arg-force-same-crs"></a></dt>
<dd><p>logical. force the same crs between the point cloud and polygon if confident that data are in same projection.
data created by a <code>cloud2trees</code> pipeline (e.g. <code><a href="cloud2raster.html">cloud2raster()</a></code>) will always have the same projection even if not recognized by <code>lidR</code> functions</p></dd>


<dt id="arg-trees-sample">trees_sample<a class="anchor" aria-label="anchor" href="#arg-trees-sample"></a></dt>
<dd><p>data.frame. provide your own tree sample list such as one generated from <code>sample_trees_flist()</code> that includes the <code>treeID</code> column.
If provided, the tree_sample_n,tree_sample_prop will be ignored</p></dd>


<dt id="arg-ofile">ofile<a class="anchor" aria-label="anchor" href="#arg-ofile"></a></dt>
<dd><p>character or logical. if a character value is provided the output will be written to the disk as a csv at the location provided.
If set to TRUE and a file path was used as the input for <code>trees_poly</code>, then a csv file will be written to the same location with the same name prefixed with "hmd_".
Leave as NA to return a data.frame of the trees from tree list from <code>trees_poly</code> with HMD values added</p></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by George Woolsey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

